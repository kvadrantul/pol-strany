# Миграция базы данных - Добавление бригад

Этот файл описывает, как заполнить базу данных 20 бригадами разных классов.

## Способ 1: Через API endpoint (Рекомендуется)

Самый простой способ - использовать API endpoint для миграции:

### 1. Найдите URL вашего приложения на Vercel

Например: `https://your-app.vercel.app`

### 2. Вызовите endpoint миграции

Используйте curl, Postman или любой другой инструмент:

```bash
curl -X POST https://your-app.vercel.app/api/migrate
```

Или через браузер, используя JavaScript консоль:

```javascript
fetch('https://your-app.vercel.app/api/migrate', {
  method: 'POST'
})
.then(res => res.json())
.then(data => console.log(data))
```

### 3. Проверьте результат

Вы получите JSON ответ со статистикой:
- `success` - успешно ли выполнена миграция
- `added` - количество добавленных бригад
- `updated` - количество обновленных бригад
- `errors` - количество ошибок
- `total` - общее количество бригад
- `results` - детальный список результатов

## Способ 2: Через Go скрипт (Локально)

Если у вас есть доступ к локальной базе данных:

### 1. Установите переменную окружения

```bash
export DATABASE_URL="libsql://your-database-url"
```

### 2. Запустите скрипт

```bash
cd scripts
go run add-contractors.go
```

## Что будет добавлено

Миграция добавит 20 бригад:

- **Эконом класс (econom)** - 5 бригад
- **Комфорт класс (comfort)** - 5 бригад
- **Бизнес класс (business)** - 4 бригады
- **Премиум класс (premium)** - 3 бригады
- **Универсал (universal)** - 2 бригады
- **Самовыравниватель (self-leveling)** - 1 бригада

## Важно

- Миграция безопасна для повторного запуска
- Если бригада уже существует, она будет обновлена
- Все бригады создаются как активные (`is_active = true`)
- Telegram ID уникальны для каждой бригады

## Быстрый запуск

Просто откройте консоль браузера на вашем сайте и выполните:

```javascript
fetch('/api/migrate', { method: 'POST' })
  .then(r => r.json())
  .then(console.log)
```

Или в терминале:

```bash
curl -X POST https://your-app.vercel.app/api/migrate
```

